<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#ff4d8d" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Be My Valentine üíñ</title>

  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#2a0f2d;
      --card:#ffffff10;
      --card2:#ffffff14;
      --text:#f8f2ff;
      --muted:#d9c6ffcc;
      --accent:#ff4d8d;
      --accent2:#b56bff;
      --gold:#ffd36b;
      --shadow: 0 18px 50px rgba(0,0,0,.38);
      --radius: 22px;
      --glass: blur(14px);
      --safe-top: env(safe-area-inset-top);
      --safe-bot: env(safe-area-inset-bottom);
    }

    *{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      overflow-x:hidden;
      background:
        radial-gradient(1000px 700px at 20% 15%, #ff4d8d33 0%, transparent 60%),
        radial-gradient(900px 720px at 85% 25%, #b56bff30 0%, transparent 60%),
        radial-gradient(1200px 900px at 50% 95%, #ffd36b22 0%, transparent 60%),
        linear-gradient(145deg, var(--bg1), var(--bg2));
    }

    /* iOS-friendly fixed decorative layer */
    .float-layer{
      position: fixed;
      inset: 0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
    }

    .spark{
      position:absolute;
      width:10px;height:10px;
      border-radius:999px;
      background: radial-gradient(circle, #fff, transparent 70%);
      opacity:.22;
      animation: drift 10s linear infinite;
    }
    @keyframes drift{
      from{ transform: translateY(110vh) translateX(0) scale(1); }
      to{ transform: translateY(-25vh) translateX(32px) scale(.85); }
    }

    .heart{
      position:absolute;
      width:18px;height:18px;
      transform: rotate(45deg);
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      opacity:.16;
      animation: floatUp 12s linear infinite;
      filter: drop-shadow(0 8px 20px rgba(255,77,141,.14));
    }
    .heart::before,.heart::after{
      content:"";
      position:absolute;
      width:18px;height:18px;
      border-radius:999px;
      background: inherit;
      top:-9px; left:0;
    }
    .heart::after{ top:0; left:-9px; }
    @keyframes floatUp{
      from{ transform: translateY(115vh) translateX(0) rotate(45deg) scale(.9); }
      to{ transform: translateY(-30vh) translateX(-50px) rotate(45deg) scale(1.15); }
    }

    /* Layout */
    .wrap{
      position:relative;
      z-index:1;
      min-height: 100dvh;
      padding:
        calc(18px + var(--safe-top))
        14px
        calc(84px + var(--safe-bot));
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .card{
      width: min(520px, 100%);
      background: linear-gradient(180deg, var(--card), var(--card2));
      border: 1px solid rgba(255,255,255,.14);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: var(--glass);
      -webkit-backdrop-filter: var(--glass);
      overflow:hidden;
      position:relative;
    }

    .glow{
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(520px 200px at 18% 8%, #ff4d8d33, transparent 58%),
        radial-gradient(520px 240px at 92% 15%, #b56bff2f, transparent 60%),
        radial-gradient(460px 260px at 55% 92%, #ffd36b1f, transparent 62%);
      pointer-events:none;
      opacity:.95;
    }

    header{
      padding: 18px 16px 10px;
      display:grid;
      gap:10px;
    }

    .badge-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      color:var(--muted);
      letter-spacing:.2px;
      font-size:12px;
      user-select:none;
    }
    .badge .dot{
      width:9px;height:9px;border-radius:999px;
      background: radial-gradient(circle, var(--gold), #ff9bd0);
      box-shadow: 0 0 14px rgba(255,211,107,.48);
    }

    h1{
      margin: 2px 0 0;
      font-size: 28px;
      line-height:1.12;
      letter-spacing:-.4px;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size:14px;
      line-height:1.65;
    }

    .panel{
      padding: 14px 16px 16px;
      border-top: 1px solid rgba(255,255,255,.10);
      display:grid;
      gap:12px;
    }

    .note{
      margin:0;
      color:#efe6ffdd;
      line-height:1.75;
      font-size:15px;
    }

    .quote{
      margin:0;
      padding: 14px 14px;
      border-radius: 18px;
      background: rgba(255,255,255,.07);
      border:1px solid rgba(255,255,255,.10);
      color:#fff;
      line-height:1.7;
      position:relative;
      font-size:14px;
    }
    .quote::before{
      content:"‚Äú";
      position:absolute;
      top:-12px; left:10px;
      font-size:48px;
      opacity:.22;
    }

    .actions{
      display:grid;
      gap:10px;
    }

    .btn{
      border:none;
      cursor:pointer;
      border-radius: 16px;
      padding: 14px 14px;
      font-weight:800;
      letter-spacing:.2px;
      transition: transform .15s ease, filter .2s ease, background .2s ease;
      user-select:none;
      width:100%;
      font-size:15px;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }

    .primary{
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color:white;
      box-shadow: 0 16px 30px rgba(255,77,141,.18);
    }
    .primary:hover{ filter: brightness(1.05); }

    .ghost{
      background: rgba(255,255,255,.08);
      color:#fff;
      border:1px solid rgba(255,255,255,.14);
    }
    .ghost:hover{ background: rgba(255,255,255,.10); }

    .footer{
      padding: 12px 16px 16px;
      color: #e9ddffb3;
      font-size: 12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      border-top: 1px solid rgba(255,255,255,.10);
      opacity:.95;
    }

    /* Modal */
    .modal{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      padding: calc(14px + var(--safe-top)) 14px calc(14px + var(--safe-bot));
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      z-index:10;
    }
    .modal.show{ display:flex; }

    .modal-card{
      width:min(520px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.08));
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 24px;
      box-shadow: 0 30px 90px rgba(0,0,0,.45);
      position:relative;
      overflow:hidden;
    }
    .modal-inner{ padding: 18px 16px 6px; }

    .big-heart{
      width:78px;height:78px;
      margin: 6px auto 10px;
      position:relative;
      transform: rotate(45deg);
      background: linear-gradient(135deg, #ff4d8d, #b56bff);
      border-radius: 16px;
      filter: drop-shadow(0 18px 40px rgba(255,77,141,.24));
      animation: thump 1.1s ease-in-out infinite;
    }
    .big-heart::before,.big-heart::after{
      content:"";
      position:absolute;
      width:78px;height:78px;
      border-radius:999px;
      background: inherit;
      top:-39px; left:0;
    }
    .big-heart::after{ top:0; left:-39px; }
    @keyframes thump{
      0%,100%{ transform: rotate(45deg) scale(1); }
      50%{ transform: rotate(45deg) scale(1.06); }
    }

    .modal h3{
      margin: 0 0 8px;
      text-align:center;
      font-size: 24px;
      letter-spacing:-.2px;
    }
    .modal p{
      margin: 0 auto 12px;
      max-width: 44ch;
      text-align:center;
      color: #efe6ffdd;
      line-height:1.7;
      font-size: 14px;
    }

    .answer-row{
      display:grid;
      gap:10px;
      padding: 0 16px 16px;
    }

    .yes{
      background: linear-gradient(135deg, #ff4d8d, #ff8db6);
      box-shadow: 0 16px 36px rgba(255,77,141,.22);
    }
    .no{
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.16);
      color:#fff;
    }

    /* ‚úÖ UPDATED: Bigger centered popup */
    .toast{
      position:fixed;
      left:50%;
      top:50%;
      transform: translate(-50%, -50%) scale(.98);
      background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.10));
      border:1px solid rgba(255,255,255,.18);
      box-shadow: 0 30px 90px rgba(0,0,0,.45);
      border-radius: 22px;
      padding: 18px 16px;
      color: #fff;
      display:none;
      z-index:30;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      width: min(420px, calc(100vw - 28px));
      text-align:center;
      font-size: 16px;
      font-weight: 800;
      line-height: 1.35;
    }
    .toast.show{
      display:block;
      animation: toastIn .20s ease-out;
    }
    @keyframes toastIn{
      from{ transform: translate(-50%, -50%) scale(.92); opacity:0; }
      to{ transform: translate(-50%, -50%) scale(1); opacity:1; }
    }

    /* Optional: dim background behind the centered popup */
    .toast-backdrop{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      display:none;
      z-index:29;
    }
    .toast-backdrop.show{ display:block; animation: fadeIn .18s ease-out; }
    @keyframes fadeIn{ from{opacity:0} to{opacity:1} }

    /* Small subtext inside popup */
    .toast small{
      display:block;
      margin-top:10px;
      font-size: 13px;
      color: #efe6ffdd;
      font-weight: 600;
      line-height: 1.35;
    }
  </style>
</head>

<body>
  <div class="float-layer" id="floatLayer" aria-hidden="true"></div>

  <main class="wrap">
    <section class="card" role="article" aria-label="Valentine page">
      <div class="glow"></div>

      <header>
        <div class="badge-row">
          <div class="badge"><span class="dot"></span><span>Valentine‚Äôs ‚Ä¢ made with love</span></div>
          <div class="badge"><span>üíå</span><span id="dateText"></span></div>
        </div>

        <h1 id="headline">Syafira Apriliansyah, this is for you ‚ú®</h1>
        <p class="sub" id="subtitle">
          I wanted to do more than just say ‚ÄúHappy Valentine‚Äôs‚Äù in a message.
          So I made a small page, something that feels like effort, because you deserve to feel truly appreciated.
        </p>
      </header>

      <div class="panel">
        <p class="note" id="message">
          I still remember the first time I saw you at the airport.
          The moment I hugged you, it felt like everything got quieter‚Äîin the best way.
          I could feel your warmth, your love, and how safe it was to be close to you.
          That moment stays with me forever.
          <br><br>
          Thank you for being you, Babe. Your kindness, your patience, and the way you make my days feel lighter.
          I notice the little things. I appreciate you more than you know. I will always love you sayang!
        </p>

        <p class="quote" id="quote">
          If love is a home, you feel like my favorite place to return to.
        </p>

        <div class="actions">
          <button class="btn primary" id="openProposalBtn">Click me! üíñ</button>
          <button class="btn ghost" id="copyBtn">Lovie Myunyenyooo üíå</button>
        </div>

        <p class="tiny">
          ~ Basir Lee Jun Wei üíñ
        </p>
      </div>

      <div class="footer">
        <div>Made with Love üíñ</div>
        <div></div>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-card">
      <div class="glow"></div>
      <div class="modal-inner">
        <div class="big-heart" aria-hidden="true"></div>

        <h3 id="modalTitle">Syafira Apriliansyah‚Ä¶ will you be my Valentine?</h3>
        <p id="modalText">
          Not just for today‚Äîif you‚Äôll let me, I want to keep choosing you,
          caring for you, and building more memories that feel like home.
        </p>
      </div>

      <div class="answer-row">
        <button class="btn yes" id="yesBtn">Yes üíû</button>
        <button class="btn no" id="noBtn" data-stage="0">No üôà</button>
      </div>
    </div>
  </div>

  <!-- ‚úÖ NEW: Backdrop for centered popup -->
  <div class="toast-backdrop" id="toastBackdrop"></div>

  <!-- Popup -->
  <div class="toast" id="toast"></div>

  <script>
    // Date badge
    const dateText = document.getElementById("dateText");
    const now = new Date();
    dateText.textContent = now.toLocaleDateString(undefined, {
      weekday:"short", year:"numeric", month:"short", day:"numeric"
    });

    // ‚úÖ UPDATED: Center toast + backdrop
    const toast = document.getElementById("toast");
    const toastBackdrop = document.getElementById("toastBackdrop");
    let toastTimer = null;

    function showToast(msg, subMsg = ""){
      // allow optional subtext
      toast.innerHTML = subMsg ? `${msg}<small>${subMsg}</small>` : msg;

      toast.classList.add("show");
      toastBackdrop.classList.add("show");

      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => {
        toast.classList.remove("show");
        toastBackdrop.classList.remove("show");
      }, 2600);
    }

    // Clicking backdrop closes popup faster (nice on mobile)
    toastBackdrop.addEventListener("click", () => {
      toast.classList.remove("show");
      toastBackdrop.classList.remove("show");
      clearTimeout(toastTimer);
    });

    // Floating hearts / sparks (lightweight for mobile)
    const floatLayer = document.getElementById("floatLayer");
    function makeSpark(){
      const s = document.createElement("div");
      s.className = "spark";
      s.style.left = (Math.random()*100) + "vw";
      s.style.top = (Math.random()*100) + "vh";
      s.style.animationDuration = (8 + Math.random()*10) + "s";
      s.style.opacity = (0.10 + Math.random()*0.22).toFixed(2);
      s.style.transform = `scale(${0.6 + Math.random()*1.4})`;
      floatLayer.appendChild(s);
      setTimeout(() => s.remove(), 20000);
    }
    function makeHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      h.style.left = (Math.random()*100) + "vw";
      h.style.top = (100 + Math.random()*30) + "vh";
      h.style.animationDuration = (9 + Math.random()*10) + "s";
      h.style.opacity = (0.10 + Math.random()*0.20).toFixed(2);
      h.style.transform = `rotate(45deg) scale(${0.7 + Math.random()*1.2})`;
      floatLayer.appendChild(h);
      setTimeout(() => h.remove(), 22000);
    }
    for (let i=0;i<14;i++) makeSpark();
    for (let i=0;i<10;i++) makeHeart();
    setInterval(makeSpark, 1100);
    setInterval(makeHeart, 1400);

    // Modal controls
    const modal = document.getElementById("modal");
    const openProposalBtn = document.getElementById("openProposalBtn");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const modalText = document.getElementById("modalText");

    function openModal(){ modal.classList.add("show"); }
    function closeModal(){
      modal.classList.remove("show");
      modalText.textContent =
        "Not just for today‚Äîif you‚Äôll let me, I want to keep choosing you, caring for you, and building more memories that feel like home.";
      noBtn.textContent = "No üôà";
      noBtn.dataset.stage = "0";
    }

    openProposalBtn.addEventListener("click", openModal);
    modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });

    yesBtn.addEventListener("click", () => {
      showToast(
        "üíñ YAY Happy Valentines Babee MYUNYENYOOO üíñ",
        "SEE YOU ON THE 19th!! ‚ú®"
      );
      closeModal();
      confettiBurst();
    });

    // Gentle "No" flow
    noBtn.addEventListener("click", () => {
      const stage = Number(noBtn.dataset.stage || "0");
      if (stage === 0){
        modalText.textContent = "Are you sure? üò≥ I really made this just for you‚Ä¶";
        noBtn.textContent = "Okay‚Ä¶ No üòÖ";
        noBtn.dataset.stage = "1";
        showToast("No pressure. Just checking üôà");
      } else {
        showToast("Still grateful for you. Always. ü§ç");
        closeModal();
      }
    });

    // Copy message (iOS-friendly best effort)
    const copyBtn = document.getElementById("copyBtn");
    copyBtn.addEventListener("click", async () => {
      const headline = document.getElementById("headline").textContent;
      const subtitle = document.getElementById("subtitle").textContent;
      const message = document.getElementById("message").innerText; // keep line breaks
      const quote = document.getElementById("quote").textContent;

      const text = `${headline}\n\n${subtitle}\n\n${message}\n\n${quote}\n\n‚Äî Happy Valentine‚Äôs üíñ`;

      try{
        await navigator.clipboard.writeText(text);
        showToast("Copied to clipboard üíå", "Now you can paste it anywhere üòö");
      } catch(e){
        showToast("Copy blocked on this browser.", "Just screenshot it instead üíñ");
      }
    });

    // Confetti (small + mobile-friendly)
    function confettiBurst(){
      const count = 90;
      const colors = ["#ff4d8d","#b56bff","#ffd36b","#ffffff"];
      for (let i=0;i<count;i++){
        const piece = document.createElement("div");
        piece.style.position = "fixed";
        piece.style.left = "50%";
        piece.style.top = "45%";
        piece.style.width = "7px";
        piece.style.height = "9px";
        piece.style.borderRadius = "2px";
        piece.style.background = colors[Math.floor(Math.random()*colors.length)];
        piece.style.opacity = "0.95";
        piece.style.zIndex = "40";
        piece.style.pointerEvents = "none";

        const angle = Math.random() * Math.PI * 2;
        const speed = 5 + Math.random()*9;
        const vx = Math.cos(angle) * speed;
        const vy = Math.sin(angle) * speed - 9;
        const spin = (Math.random()*14);
        const gravity = 0.6;
        let t = 0;

        document.body.appendChild(piece);

        const anim = () => {
          t += 1;
          const x = vx * t;
          const y = vy * t + gravity * t * t;
          piece.style.transform = `translate(${x}px, ${y}px) rotate(${spin*t}deg)`;
          piece.style.opacity = String(Math.max(0, 1 - t/75));
          if (t < 75) requestAnimationFrame(anim);
          else piece.remove();
        };
        requestAnimationFrame(anim);
      }
    }
  </script>
</body>
</html>
